import{I as h}from"./Icon-XsD-7neM.js";import{f as $,j as R,c as p,g as b,a as e,n as w,t as f,o as l,_ as B,i as K,h as T,p as D,q as M,k as N,u as y,e as k,F as A,z as j,C as L,m as d,B as g,s as V,x as E,d as F}from"./index-DyncoFNp.js";import{A as q}from"./Avatar-BvJYmT9C.js";import{E as G}from"./Empty-Dhm7Ynwu.js";import{t as O}from"./reporter-Cs0pKN63.js";import"./index.esm-CPwIBr9T.js";import"./package-DKjbUiep.js";const P={class:"hidden"},W=$({__name:"Badge",props:{num:{},max:{default:99},dot:{type:Boolean,default:!1},customStyle:{type:[Boolean,null,String,Object,Array]}},setup(C){const n=C,s=n.max||99,o=R(()=>n.num>0?n.num>s?`${s}+`:n.num+"":"");return(a,c)=>(l(),p("div",null,[a.dot?(l(),p("div",{key:0,class:"dot",style:w(a.customStyle)},null,4)):o.value?(l(),p("div",{key:1,class:"badge",style:w(a.customStyle)},f(o.value),5)):b("",!0),e("div",P,f(n.num),1)]))}}),H=B(W,[["__scopeId","data-v-ea3d1e7f"]]),Z=(C,n,s=!0)=>{const o={},a="#",c=(t,i)=>{const r=s?t.toLowerCase():t.toUpperCase();o[r]?o[r].push(i):o[r]=[i]};C.forEach(t=>{const i=t[n.firstKey]||t[n.secondKey||""]||t[n.thirdKey||""];if(i&&typeof i=="string"){const r=i[0];if(/^[a-zA-Z]$/.test(r))c(r.toLowerCase(),t);else if(/^[\u4e00-\u9fa5]$/.test(r)){const z="*abcdefghjklmnopqrstwxyz".split(""),x="阿八嚓哒妸发旮哈讥咔垃痳拏噢妑七呥扨它穵夕丫帀".split("");let I=z.find((S,_)=>(!x[_-1]||x[_-1].localeCompare(r,"zh")<=0)&&r.localeCompare(x[_],"zh")==-1);c(I&&I!=="*"?I:a,t)}else c(a,t)}else c(a,t)});const u=Object.keys(o).map(t=>({key:t,data:o[t]})),v=u.filter(t=>t.key!==a).sort((t,i)=>t.key.localeCompare(i.key,"en")),m=u.filter(t=>t.key===a);return v.concat(m)},J={class:"friend-list-container"},Q={class:"friend-group-list"},X={class:"friend-group-title"},Y=["onClick"],tt={class:"friend-name"},et=$({__name:"friend-list",setup(C){const n=L(),{proxy:s}=K(),o=s==null?void 0:s.$UIKitStore,a=T([]);function c(v){n.push({path:g.friendCard,query:{accountId:v.accountId}})}const u=D(()=>{const v=o==null?void 0:o.uiStore.friends.filter(m=>!(o!=null&&o.relationStore.blacklist.includes(m.accountId))).map(m=>({accountId:m.accountId,appellation:o==null?void 0:o.uiStore.getAppellation({account:m.accountId})}));a.value=Z(v,{firstKey:"appellation"},!1)});return M(()=>{u()}),(v,m)=>(l(),p("div",J,[e("div",Q,[a.value.length===0?(l(),N(G,{key:0,text:y(k)("noFriendText")},null,8,["text"])):b("",!0),(l(!0),p(A,null,j(a.value,t=>(l(),p("div",{class:"friend-group-item",key:t.key},[e("div",X,f(t.key),1),(l(!0),p(A,null,j(t.data,i=>(l(),p("div",{class:"friend-item",key:i.accountId,onClick:r=>c(i)},[d(q,{account:i.accountId},null,8,["account"]),e("div",tt,f(i.appellation),1)],8,Y))),128))]))),128))])]))}}),ot=B(et,[["__scopeId","data-v-6ec1bd45"]]),nt={class:"contact-list-container"},st={class:"navigation-bar"},at={class:"logo-box"},ct={key:0,class:"dropdown-container"},it={class:"add-menu-list"},lt={style:{marginRight:"5px"}},rt={style:{marginRight:"5px"}},dt={class:"contact-list"},ut={class:"contact-item-content"},pt={class:"contact-item-title"},mt={class:"contact-item-title"},_t={class:"contact-item-title"},ft=$({__name:"index",setup(C){const n=L(),s=T(!1),o=T(0);let a=()=>{};const{proxy:c}=K(),u=c==null?void 0:c.$UIKitStore,v=c==null?void 0:c.$NIM;O("ContactUIKit",v.options.appkey),V(()=>{a=D(()=>{o.value=u==null?void 0:u.sysMsgStore.getTotalUnreadMsgsCount()})});const m=S=>{const _={addFriend:g.addFriend,createGroup:g.teamCreate};s.value=!1,n.push(_[S])},t=()=>{u==null||u.sysMsgStore.setAllApplyMsgRead(),n.push(g.validlist)},i=()=>{n.push(g.blacklist)},r=()=>{n.push(g.teamlist)},z=()=>{s.value=!0},x=()=>{s.value=!1};let I="button-box";return M(()=>{a()}),M(()=>{s.value=!1,a()}),(S,_)=>(l(),p("div",nt,[s.value?(l(),p("div",{key:0,class:"dropdown-mark",onTouchstart:x},null,32)):b("",!0),e("div",st,[e("div",at,[e("div",null,f(y(k)("contactText")),1)]),e("div",{class:E(y(I))},[e("div",{onClick:z},[d(h,{type:"icon-More",size:24})]),s.value?(l(),p("div",ct,[e("div",it,[e("div",{class:"add-menu-item",onClick:_[0]||(_[0]=U=>m("addFriend"))},[e("div",lt,[d(h,{type:"icon-tianjiahaoyou"})]),F(" "+f(y(k)("addFriendText")),1)]),e("div",{class:"add-menu-item",onClick:_[1]||(_[1]=U=>m("createGroup"))},[e("div",rt,[d(h,{type:"icon-chuangjianqunzu"})]),F(" "+f(y(k)("createTeamText")),1)])])])):b("",!0)],2)]),e("div",dt,[e("div",ut,[e("div",{class:"contact-item",onClick:t},[d(h,{iconClassName:"contact-item-icon contact-valid-icon",size:42,type:"icon-yanzheng",color:"#fff"}),d(H,{num:o.value,style:{position:"absolute",top:"5px",left:"45px"}},null,8,["num"]),e("span",pt,f(y(k)("validMsgText")),1),d(h,{iconClassName:"more-icon",color:"#999",type:"icon-jiantou"})]),e("div",{class:"contact-item",onClick:i},[d(h,{iconClassName:"contact-item-icon contact-blacklist-icon",size:42,type:"icon-lahei2",color:"#fff"}),e("span",mt,f(y(k)("blacklistText")),1),d(h,{iconClassName:"more-icon",color:"#999",type:"icon-jiantou"})]),e("div",{class:"contact-item",onClick:r},[d(h,{iconClassName:"contact-item-icon contact-group-icon",size:42,type:"icon-team2",color:"#fff"}),e("span",_t,f(y(k)("teamMenuText")),1),d(h,{iconClassName:"more-icon",color:"#999",type:"icon-jiantou"})])]),d(ot)])]))}}),ht=B(ft,[["__scopeId","data-v-58c01a38"]]),vt=$({__name:"index",setup(C){return(n,s)=>(l(),N(ht))}}),bt=$({__name:"ContactsPage",setup(C){return(n,s)=>(l(),N(vt))}});export{bt as default};

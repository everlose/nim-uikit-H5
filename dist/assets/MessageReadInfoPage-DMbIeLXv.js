import{f as z,h as l,i as D,s as E,C as U,c,a,w as R,m as s,l as V,u as v,e as m,x,t as w,v as T,F as y,z as $,o as n,_ as b,k as q}from"./index-DyncoFNp.js";import{N as F}from"./NetworkAlert-BzZ3Rn47.js";import{N as P}from"./nav-bar-CoOUPfVF.js";import{I as j}from"./Icon-XsD-7neM.js";import{A}from"./Avatar-BvJYmT9C.js";import{A as N}from"./Appellation-5sErKFFL.js";import{E as M}from"./Empty-Dhm7Ynwu.js";const K={class:"msg-page-wrapper"},G={class:"msg-nav"},H={class:"msg-alert"},J={class:"msg-read-header"},O={class:"list-wrapper"},Q={class:"avatar-wrapper"},W={key:1},X={class:"list-wrapper"},Y={class:"avatar-wrapper"},Z={key:1},ee=z({__name:"message-read-info",setup(L){const p=l(0),g=l(0),f=l([]),I=l([]),r=l("read"),d=l(""),h=U(),{proxy:i}=D(),u=i==null?void 0:i.$UIKitStore,B=i==null?void 0:i.$NIM,S=()=>{h.back()};return E(()=>{var e,k;const C=(e=h.currentRoute.value.query)==null?void 0:e.messageClientId,o=(k=h.currentRoute.value.query)==null?void 0:k.conversationId;if(C&&o){d.value=B.V2NIMConversationIdUtil.parseConversationTargetId(o);const _=u&&u.msgStore.getMsg(o,[C]);_!=null&&_.length&&(u==null||u.msgStore.getTeamMessageReceiptDetailsActive(_[0]).then(t=>{p.value=t==null?void 0:t.readReceipt.readCount,g.value=t==null?void 0:t.readReceipt.unreadCount,f.value=t==null?void 0:t.readAccountList,setTimeout(()=>{I.value=t==null?void 0:t.unreadAccountList})}))}}),(C,o)=>(n(),c("div",K,[a("div",G,[s(P,{title:v(m)("msgReadPageTitleText"),showLeft:!0},{left:V(()=>[a("div",{onClick:S},[s(j,{type:"icon-zuojiantou",size:22})])]),_:1},8,["title"])]),a("div",H,[s(F)]),a("div",J,[a("div",{class:x(["msg-read-header-item",r.value==="read"?"active":""]),onClick:o[0]||(o[0]=e=>r.value="read")},w(`${v(m)("readText")}(${p.value})`),3),a("div",{class:x(["msg-read-header-item",r.value==="unread"?"active":""]),onClick:o[1]||(o[1]=e=>r.value="unread")},w(`${v(m)("unreadText")}(${g.value})`),3)]),R(a("div",O,[f.value.length?(n(!0),c(y,{key:0},$(f.value,e=>(n(),c("div",{class:"list-item",key:e},[a("div",Q,[s(A,{size:"40",account:e,"goto-user-card":!0,teamId:d.value,"goto-team-card":!1},null,8,["account","teamId"])]),s(N,{account:e,teamId:d.value},null,8,["account","teamId"])]))),128)):(n(),c("div",W,[s(M,{text:v(m)("allUnReadText")},null,8,["text"])]))],512),[[T,r.value==="read"]]),R(a("div",X,[I.value.length?(n(!0),c(y,{key:0},$(I.value,e=>(n(),c("div",{class:"list-item",key:e},[a("div",Y,[s(A,{size:"40",account:e,"goto-user-card":!0,teamId:d.value,"goto-team-card":!1},null,8,["account","teamId"])]),s(N,{account:e,teamId:d.value},null,8,["account","teamId"])]))),128)):(n(),c("div",Z,[s(M,{text:v(m)("allReadText")},null,8,["text"])]))],512),[[T,r.value==="unread"]])]))}}),te=b(ee,[["__scopeId","data-v-26c8655e"]]),le=z({__name:"MessageReadInfoPage",setup(L){return(p,g)=>(n(),q(te))}});export{le as default};

import{f as d,i as w,h as r,s as U,C as S,p as T,q as V,c as A,m as c,a as i,l as B,t as E,u as _,e as s,w as M,v as N,o as h,_ as b,k as z}from"./index-DyncoFNp.js";import{I as D}from"./Icon-XsD-7neM.js";import{N as Z}from"./NavBar-BSxUZM35.js";import{I as $}from"./Input-BrAf66hy.js";import{s as m}from"./toast-DSCwmRst.js";const q={class:"wrapper"},F={class:"userInfo-item-wrapper"},P=d({__name:"detail-item-edit",setup(I){const{proxy:o}=w(),l=S(),v=o==null?void 0:o.$UIKitStore,a=r(),t=r(""),p=r(!1),n=r(),x={name:15,mobile:11,sign:50,email:30};let f=()=>{};U(()=>{a.value=l.currentRoute.value.query.key||"",f=T(()=>{var e;if(n.value=v.userStore.myUserInfo,a.value){const u=n.value[a.value];t.value=u,a.value==="name"&&!u&&(t.value=(e=n.value)==null?void 0:e.accountId)}})});const g=e=>{t.value=e},y=()=>{p.value=!0},k=()=>{t.value=""},C=()=>{const e=t.value;if(a.value=="mobile"&&!/^\d+(\.\d+)?$/.test(e)&&e.trim()!==""){m({message:s("telErrorText"),type:"info"});return}if(a.value=="email"&&!/[a-zA-Z0-9]+([-_.][A-Za-zd]+)*@([a-zA-Z0-9]+[-.])+[A-Za-zd]{2,5}$/.test(e)&&e.trim()!==""){m({message:s("emailErrorText"),type:"info"});return}t.value=e,a.value&&v.userStore.updateSelfUserProfileActive({...n.value,[a.value]:e}).then(()=>{l.back()}).catch(()=>{m({message:s("saveText")+s(a.value||"")+s("failText"),type:"info"})})};return V(()=>{f()}),(e,u)=>(h(),A("div",q,[c(Z,{title:_(s)(a.value)},{right:B(()=>[i("div",{class:"nav-bar-text",onClick:C},E(_(s)("okText")),1)]),_:1},8,["title"]),i("div",F,[c($,{onFocus:y,maxlength:x[a.value],onInput:g,modelValue:t.value},null,8,["maxlength","modelValue"]),i("div",{onClick:k},[M(c(D,{iconClassName:"clear-icon",type:"icon-shandiao"},null,512),[[N,p.value]])])])]))}}),R=b(P,[["__scopeId","data-v-5a07aefd"]]),J=d({__name:"MyDetailEditPage",setup(I){return(o,l)=>(h(),z(R))}});export{J as default};

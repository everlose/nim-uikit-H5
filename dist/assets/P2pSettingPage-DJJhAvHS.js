import{N as b}from"./NavBar-BSxUZM35.js";import{A as B}from"./Avatar-BvJYmT9C.js";import{I as F}from"./Icon-XsD-7neM.js";import{f as x,h as c,i as w,s as O,C as q,p as D,q as R,c as $,m as l,a as t,u as m,e as a,t as M,B as G,o as y,y as g,_ as K,k as j}from"./index-DyncoFNp.js";import{t as P}from"./toast-DSCwmRst.js";import{S as N}from"./Switch-BugMB2Zb.js";const W={class:"p2p-set-container-wrapper"},z={class:"p2p-set-container"},H={class:"p2p-set-card"},J={class:"p2p-set-item"},L={class:"p2p-set-my-info"},Q={class:"p2p-set-my-nick"},X={class:"p2p-set-card"},Y={class:"p2p-set-item p2p-set-item-flex-sb"},Z={class:"p2p-set-item p2p-set-item-flex-sb"},ee=x({__name:"p2p-setting",setup(V){var T;const u=q(),d=c(""),h=c(),f=c(!1),S=c(!1),v=c(""),p=c("");let I;const{proxy:n}=w(),s=n==null?void 0:n.$UIKitStore,k=n==null?void 0:n.$NIM,C=(T=s==null?void 0:s.sdkOptions)==null?void 0:T.enableV2CloudConversation;O(()=>{const e=u.currentRoute.value.query.accountId||"";v.value=e;const o=k.V2NIMConversationIdUtil.p2pConversationId(e);p.value=o,I=D(()=>{var i,r,_;h.value=C?(i=s.conversationStore)==null?void 0:i.conversations.get(o):(r=s.localConversationStore)==null?void 0:r.conversations.get(o),d.value=s.uiStore.getAppellation({account:e}),f.value=s.relationStore.mutes.includes(e),S.value=!!((_=h.value)!=null&&_.stickTop)})});const E=()=>{const e=k.V2NIMConversationIdUtil.parseConversationTargetId(p.value);u.push({path:G.teamCreate,query:{p2pConversationId:e}})},A=async e=>{try{await s.relationStore.setP2PMessageMuteModeActive(v.value,e?g.V2NIMP2PMessageMuteMode.V2NIM_P2P_MESSAGE_MUTE_MODE_OFF:g.V2NIMP2PMessageMuteMode.V2NIM_P2P_MESSAGE_MUTE_MODE_ON)}catch{P.info(e?a("sessionUnMuteFailText"):a("sessionMuteFailText"))}},U=async e=>{var i,r;const o=e;try{C?await((i=s.conversationStore)==null?void 0:i.stickTopConversationActive(p.value,o)):await((r=s.localConversationStore)==null?void 0:r.stickTopConversationActive(p.value,o))}catch{P.info(o?a("addStickTopFailText"):a("deleteStickTopFailText"))}};return R(()=>{I()}),(e,o)=>(y(),$("div",W,[l(b,{title:m(a)("setText")},null,8,["title"]),t("div",z,[t("div",H,[t("div",J,[t("div",L,[l(B,{account:v.value},null,8,["account"]),t("div",Q,M(d.value),1)]),t("div",{class:"member-add",onClick:E},[l(F,{type:"icon-tianjiaanniu"})])])]),t("div",X,[t("div",Y,[t("div",null,M(m(a)("sessionMuteText")),1),l(N,{checked:!f.value,onChange:A},null,8,["checked"])]),t("div",Z,[t("div",null,M(m(a)("stickTopText")),1),l(N,{checked:S.value,onChange:U},null,8,["checked"])])])])]))}}),te=K(ee,[["__scopeId","data-v-76129ea3"]]),re=x({__name:"P2pSettingPage",setup(V){return(u,d)=>(y(),j(te))}});export{re as default};

import{P as I}from"./PersonSelect-BBr07mAW.js";import{N as T}from"./NavBar-BSxUZM35.js";import{f as b,h as S,i as g,s as v,C as M,c as C,m as p,a as _,l as B,t as w,u as o,e as n,o as h,_ as L,k as N}from"./index-DyncoFNp.js";import{d as P}from"./index.esm-CPwIBr9T.js";import{t as s}from"./toast-DSCwmRst.js";import"./Avatar-BvJYmT9C.js";import"./Appellation-5sErKFFL.js";import"./Empty-Dhm7Ynwu.js";import"./Icon-XsD-7neM.js";const A={class:"team-add-wrapper"},y={class:"team-member-select"},R=b({__name:"index",setup(k){const c=M(),i=S([]);let d="",r=[];const{proxy:m}=g(),e=m==null?void 0:m.$UIKitStore;v(()=>{d=c.currentRoute.value.query.teamId||"";const t=(e==null?void 0:e.uiStore.friends.filter(a=>!(e!=null&&e.relationStore.blacklist.includes(a.accountId))))||[],l=((e==null?void 0:e.teamMemberStore.getTeamMember(d))||[]).map(a=>a.accountId);i.value=t.map(a=>l.includes(a.accountId)?{accountId:a.accountId,disabled:!0}:{accountId:a.accountId})});const x=t=>{r=t},f=P(()=>{if(r.length>200){s.info(n("maxSelectedText"));return}if(r.length==0){s.info(n("friendSelect"));return}e==null||e.teamMemberStore.addTeamMemberActive({teamId:d,accounts:r}).then(async()=>{c.back()}).catch(t=>{switch(t?t.code:""){case 109306:s.info(n("noPermission"));break;default:s.info(n("addTeamMemberFailText"));break}})},800);return(t,u)=>(h(),C("div",A,[p(T,{title:o(n)("friendSelectText")},{right:B(()=>[_("div",{onClick:u[0]||(u[0]=(...l)=>o(f)&&o(f)(...l))},w(o(n)("okText")),1)]),_:1},8,["title"]),_("div",y,[p(I,{personList:i.value,showBtn:!1,onCheckboxChange:x},null,8,["personList"])])]))}}),V=L(R,[["__scopeId","data-v-67ef94c7"]]),G=b({__name:"TeamAddPage",setup(k){return(c,i)=>(h(),N(V))}});export{G as default};

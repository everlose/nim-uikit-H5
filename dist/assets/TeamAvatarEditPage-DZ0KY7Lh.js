import{f as T,i as B,h as y,s as M,C as N,c as m,m as x,a as s,w as k,u as i,e as r,g as A,v as C,t as I,l as R,d as V,o as l,_ as D,k as E}from"./index-DyncoFNp.js";import{N as P}from"./NavBar-BSxUZM35.js";import{I as U}from"./Icon-XsD-7neM.js";import{B as q}from"./Button-BqxwzfdT.js";import{t as _}from"./toast-DSCwmRst.js";import{l as S}from"./loading-BhoYo60D.js";const K={class:"team-set-container"},W={class:"team-avatar-container"},j=["src"],G={class:"choose-picture"},H={key:1,class:"avatar"},J=["src"],L={class:"team-avatar-arr-container"},O={class:"tip"},Q={class:"avatar-arr"},X=["src"],Y=["src"],Z=["src"],ee=["src"],te=["src"],ae=T({__name:"team-avatar-edit",setup(w){const h=N(),{proxy:u}=B(),t=u==null?void 0:u.$UIKitStore,n=y();let p=y(!1);const c=["https://yx-web-nosdn.netease.im/common/2425b4cc058e5788867d63c322feb7ac/groupAvatar1.png","https://yx-web-nosdn.netease.im/common/62c45692c9771ab388d43fea1c9d2758/groupAvatar2.png","https://yx-web-nosdn.netease.im/common/d1ed3c21d3f87a41568d17197760e663/groupAvatar3.png","https://yx-web-nosdn.netease.im/common/e677d8551deb96723af2b40b821c766a/groupAvatar4.png","https://yx-web-nosdn.netease.im/common/fd6c75bb6abca9c810d1292e66d5d87e/groupAvatar5.png"];let v="";const d=o=>{n.value=c[o]},f=y(null),F=()=>{var o;(o=f.value)==null||o.click()},z=async o=>{var g;const a=(g=o.target.files)==null?void 0:g[0];if(a){if(!a.type.startsWith("image/")){_.info(r("请选择图片文件"));return}try{S.show();const b=await(t==null?void 0:t.storageStore.uploadFileActive(a));n.value=b}catch{_.info(r("FailAvatarText"))}finally{S.hide(),f.value&&(f.value.value="")}}},$=()=>{t==null||t.teamStore.updateTeamActive({teamId:v,info:{avatar:n.value}}).then(()=>{_.info(r("updateTeamSuccessText")),h.back()}).catch(()=>{_.info(r("updateTeamFailedText"))})};return M(()=>{v=h.currentRoute.value.query.teamId||"";const o=t==null?void 0:t.userStore.myUserInfo.accountId,e=t==null?void 0:t.teamStore.teams.get(v),a=e==null?void 0:e.updateInfoMode;n.value=(e==null?void 0:e.avatar)||"";const g=t==null?void 0:t.teamMemberStore.getTeamMember(v,[o])[0];(a===0&&g.memberRole!==0||a===1)&&(p.value=!0)}),(o,e)=>(l(),m("div",K,[x(P,{title:i(r)("updateAvatarText")},null,8,["title"]),s("div",W,[i(p)?(l(),m("div",{key:0,onClick:F,class:"avatar"},[n.value?(l(),m("img",{key:0,"lazy-load":!0,class:"avatar-img avatar-img-edit",src:n.value,mode:"aspectFill"},null,8,j)):A("",!0),s("div",G,[x(U,{size:24,type:"choose-picture"})]),s("input",{type:"file",ref_key:"fileInput",ref:f,accept:"image/*",style:{display:"none"},onChange:z},null,544)])):(l(),m("div",H,[n.value?(l(),m("img",{key:0,"lazy-load":!0,class:"avatar-img",src:n.value,mode:"aspectFill"},null,8,J)):A("",!0)]))]),k(s("div",L,[s("div",O,I(`${i(r)("chooseDefaultImage")}`),1),s("div",Q,[s("img",{"lazy-load":!0,class:"avatar-img",src:c[0],mode:"aspectFill",onClick:e[0]||(e[0]=a=>d(0))},null,8,X),s("img",{"lazy-load":!0,class:"avatar-img",src:c[1],mode:"aspectFill",onClick:e[1]||(e[1]=a=>d(1))},null,8,Y),s("img",{"lazy-load":!0,class:"avatar-img",src:c[2],mode:"aspectFill",onClick:e[2]||(e[2]=a=>d(2))},null,8,Z),s("img",{"lazy-load":!0,class:"avatar-img",src:c[3],mode:"aspectFill",onClick:e[3]||(e[3]=a=>d(3))},null,8,ee),s("img",{"lazy-load":!0,class:"avatar-img",src:c[4],mode:"aspectFill",onClick:e[4]||(e[4]=a=>d(4))},null,8,te)])],512),[[C,i(p)]]),k(x(q,{customStyle:{background:"#ffffff",borderRadius:"8px",color:"#5ca1e6",padding:"10px",fontSize:"16px",textAlign:"center",position:"fixed",bottom:"20px",height:"40px",width:"calc(100% - 40px)",boxSizing:"border-box",margin:"0 20px"},onClick:$},{default:R(()=>[V(I(i(r)("saveText")),1)]),_:1},512),[[C,i(p)]])]))}}),se=D(ae,[["__scopeId","data-v-a717ecdf"]]),de=T({__name:"TeamAvatarEditPage",setup(w){return(h,u)=>(l(),E(se))}});export{de as default};

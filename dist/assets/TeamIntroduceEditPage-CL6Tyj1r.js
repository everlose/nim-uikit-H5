import{f as b,i as M,h as p,j as T,s as N,C as R,c as f,m as v,w as V,u as s,e as o,a as I,t as _,v as $,l as A,d as E,o as m,_ as P,k as q}from"./index-DyncoFNp.js";import{N as z}from"./NavBar-BSxUZM35.js";import{I as D}from"./Input-BrAf66hy.js";import{B as U}from"./Button-BqxwzfdT.js";import{t as l}from"./toast-DSCwmRst.js";import"./Icon-XsD-7neM.js";const j={class:"team-set-container"},F={key:0,class:"team-name-input-container"},K={class:"input-length"},L={key:1,class:"team-name-input-container"},G={class:"input"},H=b({__name:"team-introduce-edit",setup(y){const r=R(),{proxy:c}=M(),i=c==null?void 0:c.$UIKitStore;let d=p(!1);const t=p();let u="";const n=p(),h=T(()=>n.value==="name"?30:100),S=T(()=>{var e;return`${t.value?(e=t.value)==null?void 0:e.length:0}/${h.value}`}),k=()=>{t.value=""},C=()=>{if(!t.value&&n.value==="name"){l.info(o("teamTitleConfirmText"));return}i.teamStore.updateTeamActive({teamId:u,info:{[n.value]:t.value}}).then(()=>{l.info(o("updateTeamSuccessText")),r.back()}).catch(e=>{switch(e==null?void 0:e.code){case 109432:l.info(o("noPermission"));break;default:l.info(o("updateTeamFailedText"));break}})},w=e=>{t.value=e&&e.replace(/\s*/g,"")};return N(()=>{u=r.currentRoute.value.query.teamId||"";let e=r.currentRoute.value.query.type||"";n.value=e;const x=i.userStore.myUserInfo.accountId,B=i.teamMemberStore.getTeamMember(u,[x])[0],a=i.teamStore.teams.get(u),g=a==null?void 0:a.updateInfoMode;t.value=e=="name"?a==null?void 0:a.name.substring(0,30):a==null?void 0:a.intro,(g===0&&B.memberRole!==0||g===1)&&(d.value=!0)}),(e,x)=>(m(),f("div",j,[v(z,{title:n.value=="name"?s(o)("teamTitle"):s(o)("teamIntro")},null,8,["title"]),s(d)?(m(),f("div",F,[v(D,{"model-value":t.value,"allow-clear":!0,maxlength:h.value,showClear:!0,onInput:w,onClear:k,style:{height:"40px"}},null,8,["model-value","maxlength"]),I("div",K,_(S.value),1)])):(m(),f("div",L,[I("div",G,_(t.value),1)])),V(v(U,{customStyle:{background:"#ffffff",borderRadius:"8px",color:"#5ca1e6",padding:"10px",fontSize:"16px",textAlign:"center",position:"fixed",bottom:"20px",height:"40px",width:"calc(100% - 40px)",boxSizing:"border-box",margin:"0 20px"},onClick:C},{default:A(()=>[E(_(s(o)("saveText")),1)]),_:1},512),[[$,s(d)]])]))}}),J=P(H,[["__scopeId","data-v-1caa64d9"]]),ee=b({__name:"TeamIntroduceEditPage",setup(y){return(r,c)=>(m(),q(J))}});export{ee as default};

import{f as N,h as T,i as E,p as g,q as R,c as l,m as s,a as t,u as n,e as a,k,F as u,z as j,o as i,g as x,y as f,t as d,_ as U}from"./index-DyncoFNp.js";import{E as L}from"./Empty-Dhm7Ynwu.js";import{A}from"./Avatar-BvJYmT9C.js";import{N as P}from"./NavBar-BSxUZM35.js";import{I as M}from"./Icon-XsD-7neM.js";import{A as I}from"./Appellation-5sErKFFL.js";import{t as h}from"./toast-DSCwmRst.js";const b={class:"valid-list-container"},B={class:"valid-list-content"},$={class:"valid-item-left"},w={class:"valid-name-container"},O={class:"valid-name"},q={class:"valid-action"},z={class:"valid-state"},G={class:"valid-state-text"},J={key:0,class:"valid-item-left"},K={class:"valid-name-container"},W={class:"valid-name"},H={class:"valid-action"},Q={class:"valid-item-left"},X={class:"valid-name-container"},Y={class:"valid-name"},Z={class:"valid-action"},tt={class:"valid-state"},et={class:"valid-state-text"},at={class:"valid-item-left"},ct={class:"valid-name-container"},nt={class:"valid-name"},st={class:"valid-action"},it={class:"valid-buttons"},ot=["onClick","loading"],lt=["onClick","loading"],dt=N({__name:"valid-list",setup(S){const v=T([]),r=T(!1),{proxy:p}=E(),c=p==null?void 0:p.$UIKitStore,y=p==null?void 0:p.$NIM,m=o=>o.applicantAccountId===c.userStore.myUserInfo.accountId,F=async o=>{r.value=!0;try{await c.friendStore.rejectAddApplicationActive(o),h.info(a("rejectedText"))}catch{h.info(a("rejectFailedText"))}finally{r.value=!1}},C=async o=>{r.value=!0;try{try{await c.friendStore.acceptAddApplicationActive(o),h.info(a("acceptedText"))}catch{h.info(a("acceptFailedText"))}const _=y.V2NIMMessageCreator.createTextMessage(a("passFriendAskText"));await c.msgStore.sendMessageActive({msg:_,conversationId:y.V2NIMConversationIdUtil.p2pConversationId(o.operatorAccountId)})}catch(_){console.log("error",_)}finally{r.value=!1}},V=g(()=>{var o;v.value=c==null?void 0:c.sysMsgStore.friendApplyMsgs,(o=c==null?void 0:c.sysMsgStore.friendApplyMsgs)==null||o.map(_=>{c==null||c.userStore.getUserActive(_.applicantAccountId)})});return R(()=>{V()}),(o,_)=>(i(),l("div",b,[s(P,{title:n(a)("validMsgText")},null,8,["title"]),t("div",B,[v.value.length===0?(i(),k(L,{key:0,text:n(a)("validEmptyText")},null,8,["text"])):(i(!0),l(u,{key:1},j(v.value,e=>(i(),l("div",{class:"valid-item",key:e.timestamp},[e.status===n(f).V2NIMFriendAddApplicationStatus.V2NIM_FRIEND_ADD_APPLICATION_STATUS_AGREED?(i(),l(u,{key:0},[t("div",$,[s(A,{account:e.applicantAccountId},null,8,["account"]),t("div",w,[t("div",O,[s(I,{account:e.applicantAccountId},null,8,["account"])]),t("div",q,d(n(a)("applyFriendText")),1)])]),t("div",z,[s(M,{type:"icon-yidu"}),t("span",G,d(n(a)("acceptResultText")),1)])],64)):e.status===n(f).V2NIMFriendAddApplicationStatus.V2NIM_FRIEND_ADD_APPLICATION_STATUS_REJECTED?(i(),l(u,{key:1},[m(e)?(i(),l("div",J,[s(A,{account:e.recipientAccountId},null,8,["account"]),t("div",K,[t("div",W,[s(I,{account:e.recipientAccountId},null,8,["account"])]),t("div",H,d(n(a)("beRejectResultText")),1)])])):(i(),l(u,{key:1},[t("div",Q,[s(A,{account:e.applicantAccountId},null,8,["account"]),t("div",X,[t("div",Y,[s(I,{account:e.applicantAccountId},null,8,["account"])]),t("div",Z,d(n(a)("applyFriendText")),1)])]),t("div",tt,[s(M,{type:"icon-shandiao"}),t("span",et,d(n(a)("rejectResultText")),1)])],64))],64)):e.status===n(f).V2NIMFriendAddApplicationStatus.V2NIM_FRIEND_ADD_APPLICATION_STATUS_INIT?(i(),l(u,{key:2},[m(e)?x("",!0):(i(),l(u,{key:0},[t("div",at,[s(A,{account:e.applicantAccountId},null,8,["account"]),t("div",ct,[t("div",nt,[s(I,{account:e.applicantAccountId},null,8,["account"])]),t("div",st,d(n(a)("applyFriendText")),1)])]),t("div",it,[t("div",{class:"valid-button button-reject",onClick:D=>F(e),loading:r.value},d(n(a)("rejectText")),9,ot),t("div",{class:"valid-button button-accept",onClick:D=>C(e),loading:r.value},d(n(a)("acceptText")),9,lt)])],64))],64)):x("",!0)]))),128))])]))}}),rt=U(dt,[["__scopeId","data-v-ac1690f8"]]),ft=N({__name:"ValidListPage",setup(S){return(v,r)=>(i(),k(rt))}});export{ft as default};
